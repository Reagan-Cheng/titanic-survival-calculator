<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Titanic ç”Ÿå­˜ç‡é ä¼°ï½œSurvival Probability (Bilingual)</title>
<style>
  body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans TC", "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji"; line-height:1.6; padding: 24px; }
  .card { max-width: 900px; margin: 0 auto; border: 1px solid #e5e7eb; border-radius: 16px; padding: 24px; box-shadow: 0 10px 25px rgba(0,0,0,0.06); }
  h1 { margin-top: 0; }
  h2 { margin-bottom: 8px; }
  label { display:block; margin: 8px 0 4px; font-weight:600; }
  input, select { width:100%; padding:10px 12px; border:1px solid #d1d5db; border-radius:10px; }
  .row { display:grid; grid-template-columns: 1fr 1fr; gap:16px; }
  .muted { color:#6b7280; font-size: 14px; }
  .btn { display:inline-block; padding:10px 16px; border-radius:10px; border:1px solid #111827; background:#111827; color:#fff; cursor:pointer; font-weight:600; }
  .btn:active { transform: translateY(1px); }
  .result { font-size: 20px; font-weight:700; margin-top: 12px; }
  .pill { display:inline-block; padding:6px 10px; border-radius:999px; border:1px solid #e5e7eb; margin-right:8px; background:#f9fafb; font-size:12px; }
  .footer { margin-top:20px; font-size:13px; color:#6b7280; }
  .en { color:#374151; font-size: 13px; display:block; margin-top:2px; font-weight:500; }
</style>
</head>
<body>
  <div class="card">
    <h1>ğŸš¢ Titanic ç”Ÿå­˜ç‡é ä¼°ï½œSurvival Probability</h1>
    <p class="muted">
      æœ¬å·¥å…·ä»¥æ‚¨æä¾›çš„ Titanic è¨“ç·´è³‡æ–™è¨“ç·´ä¸€å€‹<b>é‚è¼¯æ–¯è¿´æ­¸</b>æ¨¡å‹ï¼›æ‰€æœ‰å‰è™•ç†èˆ‡æ¨è«–åœ¨ç€è¦½å™¨ç«¯é›¢ç·šå®Œæˆã€‚<br/>
      This tool trains a <b>logistic regression</b> model on your provided Titanic training data; preprocessing and inference run locally in your browser.
      <br/>5 æŠ˜äº¤å‰é©—è­‰æº–ç¢ºç‡ï¼ˆè¨“ç·´è³‡æ–™ï¼‰ï¼š<b>0.794</b>ï¼ˆÂ±0.017ï¼‰ã€‚
      <span class="en">5-fold CV accuracy (on training data): <b>0.794</b> (Â±0.017).</span>
    </p>

    <h2>è¼¸å…¥è®Šæ•¸ï½œInputs</h2>
    <div class="row">
      <div>
        <label>è‰™ç­‰ï¼ˆPclassï¼‰<span class="en">Class (1=First, 2=Second, 3=Third)</span></label>
        <select id="pclass">
          <option value="1">1ï¼ˆé ­ç­‰ï½œFirstï¼‰</option>
          <option value="2">2ï¼ˆäºŒç­‰ï½œSecondï¼‰</option>
          <option value="3" selected>3ï¼ˆä¸‰ç­‰ï½œThirdï¼‰</option>
        </select>
      </div>
      <div>
        <label>æ€§åˆ¥ï¼ˆSexï¼‰<span class="en">Sex</span></label>
        <select id="sex">
          <option value="female" selected>å¥³æ€§ï½œFemale</option>
          <option value="male">ç”·æ€§ï½œMale</option>
        </select>
      </div>
    </div>

    <div class="row">
      <div>
        <label>å¹´é½¡ï¼ˆAgeï¼‰<span class="en">Age (years)</span></label>
        <input id="age" type="number" min="0" step="1" placeholder="è‹¥ç•™ç©ºï¼Œä»¥ä¸­ä½æ•¸ 28 ä»£å…¥ï½œIf blank, use median 28" />
      </div>
      <div>
        <label>ç¥¨åƒ¹ï¼ˆFareï¼‰<span class="en">Fare</span></label>
        <input id="fare" type="number" min="0" step="0.01" placeholder="è‹¥ç•™ç©ºï¼Œä»¥ä¸­ä½æ•¸ 14.4542 ä»£å…¥ï½œIf blank, use median 14.4542" />
      </div>
    </div>

    <div class="row">
      <div>
        <label>åŒè‰™å…„å¼Ÿå§Šå¦¹/é…å¶æ•¸ï¼ˆSibSpï¼‰<span class="en"># of siblings/spouses aboard</span></label>
        <input id="sibsp" type="number" min="0" step="1" value="0" />
      </div>
      <div>
        <label>åŒè¡Œçˆ¶æ¯/å­å¥³æ•¸ï¼ˆParchï¼‰<span class="en"># of parents/children aboard</span></label>
        <input id="parch" type="number" min="0" step="1" value="0" />
      </div>
    </div>

    <div>
      <label>ç™»èˆ¹æ¸¯ï¼ˆEmbarkedï¼‰<span class="en">Port of Embarkation</span></label>
      <select id="embarked">
        <option value="C">Cï¼ˆç‘Ÿå ¡ï½œCherbourgï¼‰</option>
        <option value="Q">Qï¼ˆçš‡åé®ï½œQueenstownï¼‰</option>
        <option value="S" selected>Sï¼ˆå—å®‰æ™®æ•¦ï½œSouthamptonï¼‰</option>
      </select>
    </div>

    <div style="margin-top:16px;">
      <button class="btn" onclick="predict()">è¨ˆç®—ç”Ÿå­˜ç‡ï½œCompute Survival Probability</button>
      <span class="pill">Age ä¸­ä½æ•¸ï¼š28ï½œMedian</span>
      <span class="pill">Fare ä¸­ä½æ•¸ï¼š14.4542ï½œMedian</span>
      <span class="pill">Embarked çœ¾æ•¸ï¼šSï½œMode</span>
    </div>

    <div id="out" class="result" aria-live="polite"></div>

    <div class="footer">
      ç‰¹å¾µï¼šPclass, Sex, Age, SibSp, Parch, Fare, Embarked_C, Embarked_Q, Embarked_Sã€‚æœ¬é é¢å®Œå…¨é›¢ç·šé‹ä½œï¼ˆä¸å‚³è¼¸è³‡æ–™ï¼‰ã€‚<br/>
      Features: Pclass, Sex, Age, SibSp, Parch, Fare, Embarked_C, Embarked_Q, Embarked_S. This page runs fully offline; no data is transmitted.
    </div>
  </div>

<script>
// æ¨¡å‹ä¿‚æ•¸ï¼ˆç”±å¾Œç«¯è¨“ç·´å¾ŒåµŒå…¥ï¼‰ï½œModel coefficients embedded below
const MODEL = {"intercept": 4.902880986142864, "coefficients": {"Pclass": -1.0642928908970917, "Sex": -2.6182525065329116, "Age": -0.038228694117076904, "SibSp": -0.3144107938850883, "Parch": -0.08014010204114488, "Fare": 0.002166817636242296, "Embarked_C": 0.15130422919283495, "Embarked_Q": 0.09624893555792215, "Embarked_S": -0.2467858795079217}, "age_median": 28.0, "fare_median": 14.4542, "embarked_mode": "S", "cv_accuracy_mean": 0.7935157868307073, "cv_accuracy_std": 0.017209351470805104, "feature_order": ["Pclass", "Sex", "Age", "SibSp", "Parch", "Fare", "Embarked_C", "Embarked_Q", "Embarked_S"]};

function sigmoid(z) { return 1.0 / (1.0 + Math.exp(-z)); }
function valueOr(v, fallback) { return (v === null || v === undefined || v === '') ? fallback : parseFloat(v); }

function predict() {
  // è®€å–è¼¸å…¥ï½œRead inputs
  const pclass = parseInt(document.getElementById('pclass').value);
  const sexStr = document.getElementById('sex').value;
  const ageIn = document.getElementById('age').value;
  const fareIn = document.getElementById('fare').value;
  const sibsp = parseInt(document.getElementById('sibsp').value);
  const parch = parseInt(document.getElementById('parch').value);
  const embarked = document.getElementById('embarked').value;

  // å‰è™•ç†èˆ‡ç·¨ç¢¼ï½œPreprocessing and encoding
  const age = valueOr(ageIn, MODEL.age_median);
  const fare = valueOr(fareIn, MODEL.fare_median);
  const sex = (sexStr === 'male') ? 1 : 0;
  const eC = (embarked === 'C') ? 1 : 0;
  const eQ = (embarked === 'Q') ? 1 : 0;
  const eS = (embarked === 'S') ? 1 : 0;

  // ç·šæ€§çµ„åˆï½œLinear combination
  let z = MODEL.intercept;
  z += MODEL.coefficients["Pclass"] * pclass;
  z += MODEL.coefficients["Sex"] * sex;
  z += MODEL.coefficients["Age"] * age;
  z += MODEL.coefficients["SibSp"] * sibsp;
  z += MODEL.coefficients["Parch"] * parch;
  z += MODEL.coefficients["Fare"] * fare;
  z += MODEL.coefficients["Embarked_C"] * eC;
  z += MODEL.coefficients["Embarked_Q"] * eQ;
  z += MODEL.coefficients["Embarked_S"] * eS;

  const prob = sigmoid(z);
  const pct = (prob * 100).toFixed(1);

  // è¼¸å‡ºå‘ˆç¾ï½œOutput
  const verdictZh = (prob >= 0.5) ? "é æ¸¬ï¼šè¼ƒå¯èƒ½ã€Œç”Ÿé‚„ã€" : "é æ¸¬ï¼šè¼ƒå¯èƒ½ã€Œæœªç”Ÿé‚„ã€";
  const verdictEn = (prob >= 0.5) ? "Prediction: more likely to SURVIVE" : "Prediction: more likely NOT to survive";

  document.getElementById('out').innerHTML =
    'ç”Ÿå­˜ç‡é ä¼°ï¼š<span style="font-size:28px">' + pct + '%</span>ï½œ' + verdictZh +
    '<br/><span class="en">Estimated survival probability: <b>' + pct + '%</b> ï½œ ' + verdictEn + '</span>';
}
</script>
</body>
</html>
